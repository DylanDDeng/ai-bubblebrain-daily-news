{{ define "main" }}
<section class="section">
  <div class="tools-shell">
    <header class="page-header tools-hero">
      <p class="page-eyebrow">{{ i18n "tools_eyebrow" }}</p>
      <h1>{{ .Title }}</h1>
      {{ with .Description }}
        <p class="page-desc">{{ . }}</p>
      {{ end }}
    </header>

    <div class="tools-layout">
      <!-- 移动端筛选按钮 -->
      <button class="tools-mobile-toggle" id="tools-mobile-toggle" type="button">
        <span>{{ i18n "tools_filter_label" | default "筛选" }}</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
        </svg>
      </button>

      <!-- 左侧边栏 -->
      <aside class="tools-sidebar" id="tools-sidebar">
        <div class="tools-sidebar__header">
          <span>{{ i18n "tools_filter_label" | default "筛选" }}</span>
          <button class="tools-sidebar__close" id="tools-sidebar-close" type="button">&times;</button>
        </div>
        <div class="tools-search">
          <input type="search" id="tools-search" placeholder="{{ i18n "tools_search_placeholder" }}" aria-label="{{ i18n "tools_search_aria" }}">
        </div>
        <div class="tools-filter-group">
          <h4>{{ i18n "tools_company_label" | default "公司" }}</h4>
          <div class="tools-filter-list" id="tools-company-filters" aria-label="{{ i18n "tools_company_filter_aria" }}"></div>
        </div>
        <div class="tools-filter-group">
          <h4>{{ i18n "tools_domain_label" | default "领域" }}</h4>
          <div class="tools-filter-list" id="tools-domain-filters" aria-label="{{ i18n "tools_domain_filter_aria" }}"></div>
        </div>
      </aside>

      <!-- 侧边栏遮罩 -->
      <div class="tools-sidebar-backdrop" id="tools-sidebar-backdrop"></div>

      <!-- 右侧内容区 -->
      <main class="tools-content">
        <div id="tools-grid" class="tools-grid" aria-live="polite"></div>
        <nav id="tools-pagination" class="pagination" aria-label="{{ i18n "tools_pagination_aria" }}" hidden></nav>
        <div id="tools-empty" class="tools-empty" hidden>
          <p>{{ i18n "tools_empty_title" }}</p>
          <p>{{ i18n "tools_empty_hint" }}</p>
        </div>
        <div id="tools-empty-filter" class="tools-empty" hidden>
          <p>{{ i18n "tools_empty_filter_title" }}</p>
          <p>{{ i18n "tools_empty_filter_hint" }}</p>
        </div>
      </main>
    </div>
  </div>
</section>


<script>
(() => {
  const dataUrl = "{{ "/ai-tools.json" | relLangURL }}";
  const I18N = {
    allCompaniesWithCount: "{{ i18n "tools_all_companies_with_count" }}",
    allDomainsWithCount: "{{ i18n "tools_all_domains_with_count" }}",
    expandCompanies: "{{ i18n "tools_expand_companies" }}",
    collapseCompanies: "{{ i18n "tools_collapse_companies" }}",
    expandDomains: "{{ i18n "tools_expand_domains" }}",
    collapseDomains: "{{ i18n "tools_collapse_domains" }}",
    defaultAlt: "{{ i18n "tools_default_alt" }}",
    untitled: "{{ i18n "tools_default_title" }}",
    unknownCompany: "{{ i18n "tools_unknown_company" }}",
    viewDetail: "{{ i18n "tools_view_detail" }}",
    domainPrefix: "{{ i18n "tools_domain_prefix" }}",
    domainUnknown: "{{ i18n "tools_domain_unknown" }}",
    companyPrefix: "{{ i18n "tools_company_prefix" }}",
    companyUnknown: "{{ i18n "tools_company_unknown" }}",
    cardEyebrowFallback: "{{ i18n "tools_card_eyebrow_fallback" }}",
    prevPage: "{{ i18n "pagination_prev" }}",
    nextPage: "{{ i18n "pagination_next" }}"
  };
  const grid = document.getElementById("tools-grid");
  const empty = document.getElementById("tools-empty");
  const pagination = document.getElementById("tools-pagination");
  const companyFiltersWrap = document.getElementById("tools-company-filters");
  const domainFiltersWrap = document.getElementById("tools-domain-filters");
  const searchInput = document.getElementById("tools-search");
  const MAX_TAGS_VISIBLE = 8;
  const pageSize = 20;
  let allItems = [];
  let filteredItems = [];
  let currentPage = 1;
  let currentCompanyFilter = "all";
  let currentDomainFilter = "all";
  let searchTerm = "";
  let companyFiltersCollapsed = true;
  let domainFiltersCollapsed = true;

  function setEmpty(isEmpty) {
    empty.hidden = !isEmpty;
  }

  function setFilterEmpty(isEmpty) {
    const filterEmpty = document.getElementById("tools-empty-filter");
    if (filterEmpty) filterEmpty.hidden = !isEmpty;
  }

  function collectCompanies(items) {
    const companies = new Set();
    items.forEach((item) => {
      if (item.company) {
        companies.add(item.company.toString().trim());
      }
    });
    return Array.from(companies).filter(Boolean);
  }

  function collectDomains(items) {
    const domains = new Set();
    items.forEach((item) => {
      if (item.domain) {
        domains.add(item.domain.toString().trim());
      }
    });
    return Array.from(domains).filter(Boolean);
  }

  function collectCompanyCounts(items) {
    const counts = Object.create(null);
    items.forEach((item) => {
      const company = (item.company || "").toString().trim();
      if (company) {
        counts[company] = (counts[company] || 0) + 1;
      }
    });
    return counts;
  }

  function collectDomainCounts(items) {
    const counts = Object.create(null);
    items.forEach((item) => {
      const domain = (item.domain || "").toString().trim();
      if (domain) {
        counts[domain] = (counts[domain] || 0) + 1;
      }
    });
    return counts;
  }

  function renderCompanyFilters(companies) {
    if (!companyFiltersWrap) return;
    companyFiltersWrap.innerHTML = "";

    const visibleCompanies = (() => {
      if (!companyFiltersCollapsed) return companies;
      const base = companies.slice(0, MAX_TAGS_VISIBLE);
      if (currentCompanyFilter !== "all" && companies.includes(currentCompanyFilter) && !base.includes(currentCompanyFilter)) {
        base.push(currentCompanyFilter);
      }
      return base;
    })();

    const frag = document.createDocumentFragment();
    const allBtn = document.createElement("button");
    allBtn.className = currentCompanyFilter === "all" ? "tools-filter-pill active" : "tools-filter-pill";
    const counts = collectCompanyCounts(allItems);
    allBtn.textContent = I18N.allCompaniesWithCount.replace("{count}", String(allItems.length));
    allBtn.setAttribute("data-company", "all");
    frag.appendChild(allBtn);

    visibleCompanies.forEach((company) => {
      const btn = document.createElement("button");
      btn.className = company === currentCompanyFilter ? "tools-filter-pill active" : "tools-filter-pill";
      btn.textContent = `${company} @${counts[company] || 0}`;
      btn.setAttribute("data-company", company);
      frag.appendChild(btn);
    });

    if (companies.length > MAX_TAGS_VISIBLE) {
      const toggle = document.createElement("button");
      toggle.className = "tools-filter-toggle";
      toggle.type = "button";
      toggle.textContent = companyFiltersCollapsed
        ? I18N.expandCompanies.replace("{count}", String(companies.length - MAX_TAGS_VISIBLE))
        : I18N.collapseCompanies;
      toggle.addEventListener("click", () => {
        companyFiltersCollapsed = !companyFiltersCollapsed;
        renderCompanyFilters(companies);
      });
      frag.appendChild(toggle);
    }

    companyFiltersWrap.appendChild(frag);

    companyFiltersWrap.querySelectorAll(".tools-filter-pill").forEach((btn) => {
      btn.addEventListener("click", () => {
        currentCompanyFilter = btn.dataset.company || "all";
        companyFiltersWrap.querySelectorAll(".tools-filter-pill").forEach((el) => el.classList.remove("active"));
        btn.classList.add("active");
        applyFilter();
      });
    });
  }

  function renderDomainFilters(domains) {
    if (!domainFiltersWrap) return;
    domainFiltersWrap.innerHTML = "";

    const visibleDomains = (() => {
      if (!domainFiltersCollapsed) return domains;
      const base = domains.slice(0, MAX_TAGS_VISIBLE);
      if (currentDomainFilter !== "all" && domains.includes(currentDomainFilter) && !base.includes(currentDomainFilter)) {
        base.push(currentDomainFilter);
      }
      return base;
    })();

    const frag = document.createDocumentFragment();
    const allBtn = document.createElement("button");
    allBtn.className = currentDomainFilter === "all" ? "tools-filter-pill active" : "tools-filter-pill";
    const counts = collectDomainCounts(allItems);
    allBtn.textContent = I18N.allDomainsWithCount.replace("{count}", String(allItems.length));
    allBtn.setAttribute("data-domain", "all");
    frag.appendChild(allBtn);

    visibleDomains.forEach((domain) => {
      const btn = document.createElement("button");
      btn.className = domain === currentDomainFilter ? "tools-filter-pill active" : "tools-filter-pill";
      btn.textContent = `${domain} @${counts[domain] || 0}`;
      btn.setAttribute("data-domain", domain);
      frag.appendChild(btn);
    });

    if (domains.length > MAX_TAGS_VISIBLE) {
      const toggle = document.createElement("button");
      toggle.className = "tools-filter-toggle";
      toggle.type = "button";
      toggle.textContent = domainFiltersCollapsed
        ? I18N.expandDomains.replace("{count}", String(domains.length - MAX_TAGS_VISIBLE))
        : I18N.collapseDomains;
      toggle.addEventListener("click", () => {
        domainFiltersCollapsed = !domainFiltersCollapsed;
        renderDomainFilters(domains);
      });
      frag.appendChild(toggle);
    }

    domainFiltersWrap.appendChild(frag);

    domainFiltersWrap.querySelectorAll(".tools-filter-pill").forEach((btn) => {
      btn.addEventListener("click", () => {
        currentDomainFilter = btn.dataset.domain || "all";
        domainFiltersWrap.querySelectorAll(".tools-filter-pill").forEach((el) => el.classList.remove("active"));
        btn.classList.add("active");
        applyFilter();
      });
    });
  }

  function buildCard(item) {
    const card = document.createElement("article");
    card.className = "tools-card reveal-text";
    card.dataset.id = item.id || "";
    if (item.company) {
      card.dataset.company = item.company.toLowerCase();
    }

    // 左侧 Logo（正方形）
    const logoWrap = document.createElement("div");
    logoWrap.className = "tools-logo";
    const logo = document.createElement("img");
    logo.src = item.logo || "";
    logo.alt = item.name || I18N.defaultAlt;
    logo.loading = "lazy";
    logoWrap.appendChild(logo);

    // 中间信息区
    const meta = document.createElement("div");
    meta.className = "tools-card__meta";

    // 标题
    const title = document.createElement("h3");
    title.textContent = item.name || I18N.untitled;

    // 标签行（领域 + 公司）
    const tags = document.createElement("div");
    tags.className = "tools-tags";
    const domainTag = document.createElement("span");
    domainTag.className = "tools-tag tools-tag--domain";
    domainTag.textContent = item.domain || I18N.cardEyebrowFallback;
    const companyTag = document.createElement("span");
    companyTag.className = "tools-tag tools-tag--company";
    companyTag.textContent = item.company || I18N.unknownCompany;
    tags.appendChild(domainTag);
    tags.appendChild(companyTag);

    meta.appendChild(title);
    meta.appendChild(tags);

    // 右侧访问按钮
    const visitBtn = document.createElement("a");
    visitBtn.className = "tools-card__visit";
    visitBtn.href = item.url || "#";
    visitBtn.target = "_blank";
    visitBtn.rel = "noopener noreferrer";
    visitBtn.textContent = I18N.viewDetail;
    visitBtn.addEventListener("click", (e) => e.stopPropagation());

    card.appendChild(logoWrap);
    card.appendChild(meta);
    card.appendChild(visitBtn);

    return card;
  }

  function renderGrid() {
    if (!grid) return;
    grid.innerHTML = "";

    const totalItems = filteredItems.length;
    if (!totalItems) {
      if (pagination) {
        pagination.hidden = true;
        pagination.innerHTML = "";
      }
      return;
    }

    const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));
    if (currentPage > totalPages) currentPage = totalPages;

    const start = (currentPage - 1) * pageSize;
    const pageItems = filteredItems.slice(start, start + pageSize);

    const frag = document.createDocumentFragment();
    pageItems.forEach((item) => {
      const card = buildCard(item);
      if (card) frag.appendChild(card);
    });

    grid.appendChild(frag);

    requestAnimationFrame(() => {
      grid.querySelectorAll(".reveal-text").forEach((el, index) => {
        setTimeout(() => el.classList.add("active"), index * 60);
      });
    });
  }

  function goToPage(pageNumber) {
    const totalPages = Math.max(1, Math.ceil(filteredItems.length / pageSize));
    currentPage = Math.min(Math.max(pageNumber, 1), totalPages);
    renderGrid();
    renderPagination();
  }

  function renderPagination() {
    if (!pagination) return;
    const totalPages = Math.ceil(filteredItems.length / pageSize);

    if (totalPages <= 1) {
      pagination.hidden = true;
      pagination.innerHTML = "";
      return;
    }

    pagination.hidden = false;
    pagination.innerHTML = "";

    const prev =
      currentPage > 1
        ? Object.assign(document.createElement("a"), { href: "#" })
        : document.createElement("span");
    prev.className = "pagination-link" + (currentPage === 1 ? " disabled" : "");
    prev.textContent = I18N.prevPage;
    if (currentPage > 1) {
      prev.addEventListener("click", (event) => {
        event.preventDefault();
        goToPage(currentPage - 1);
      });
    }
    pagination.appendChild(prev);

    const pagesWrap = document.createElement("div");
    pagesWrap.className = "pagination-pages";
    for (let i = 1; i <= totalPages; i += 1) {
      if (i === currentPage) {
        const span = document.createElement("span");
        span.className = "pagination-page current";
        span.textContent = i;
        pagesWrap.appendChild(span);
      } else {
        const link = document.createElement("a");
        link.className = "pagination-page";
        link.href = "#";
        link.textContent = i;
        link.addEventListener("click", (event) => {
          event.preventDefault();
          goToPage(i);
        });
        pagesWrap.appendChild(link);
      }
    }
    pagination.appendChild(pagesWrap);

    const next =
      currentPage < totalPages
        ? Object.assign(document.createElement("a"), { href: "#" })
        : document.createElement("span");
    next.className = "pagination-link" + (currentPage === totalPages ? " disabled" : "");
    next.textContent = I18N.nextPage;
    if (currentPage < totalPages) {
      next.addEventListener("click", (event) => {
        event.preventDefault();
        goToPage(currentPage + 1);
      });
    }
    pagination.appendChild(next);
  }

  function applyFilter() {
    if (!allItems.length) return;

    const term = searchTerm.trim().toLowerCase();
    const matchesSearch = (item) => {
      if (!term) return true;
      const haystack = [
        item.name,
        item.domain,
        item.company
      ]
        .map((v) => (v || "").toString().toLowerCase())
        .join(" ");
      return haystack.includes(term);
    };

    const byCompany = (item) => {
      if (currentCompanyFilter === "all") return true;
      const filterLower = currentCompanyFilter.toLowerCase();
      const company = (item.company || "").toString().trim().toLowerCase();
      return company === filterLower;
    };

    const byDomain = (item) => {
      if (currentDomainFilter === "all") return true;
      const filterLower = currentDomainFilter.toLowerCase();
      const domain = (item.domain || "").toString().trim().toLowerCase();
      return domain === filterLower;
    };

    filteredItems = allItems.filter((item) => byCompany(item) && byDomain(item) && matchesSearch(item));

    const noMatch = filteredItems.length === 0;
    setFilterEmpty(noMatch && (currentCompanyFilter !== "all" || currentDomainFilter !== "all" || term));
    currentPage = 1;
    renderGrid();
    renderPagination();
  }

  function render(items) {
    if (!items || !items.length) {
      setEmpty(true);
      return;
    }

    setEmpty(false);
    allItems = items;
    filteredItems = [...allItems];
    currentPage = 1;
    renderCompanyFilters(collectCompanies(allItems));
    renderDomainFilters(collectDomains(allItems));
    setFilterEmpty(false);
    renderGrid();
    renderPagination();
  }

  if (searchInput) {
    searchInput.addEventListener("input", (event) => {
      searchTerm = event.target.value || "";
      applyFilter();
    });
  }

  fetch(dataUrl)
    .then((res) => {
      console.log('fetch response:', res.status, res.statusText);
      if (!res.ok) throw new Error(`网络异常: ${res.status}`);
      return res.json();
    })
    .then((items) => {
      console.log('AI tools loaded:', items.length);
      render(items);
    })
    .catch((err) => {
      console.error('加载ai-tools.json失败:', err);
      setEmpty(true);
    });

  // 移动端侧边栏控制
  const sidebar = document.getElementById("tools-sidebar");
  const sidebarBackdrop = document.getElementById("tools-sidebar-backdrop");
  const mobileToggle = document.getElementById("tools-mobile-toggle");
  const sidebarClose = document.getElementById("tools-sidebar-close");

  function openSidebar() {
    sidebar.classList.add("open");
    sidebarBackdrop.classList.add("open");
    document.body.style.overflow = "hidden";
  }

  function closeSidebar() {
    sidebar.classList.remove("open");
    sidebarBackdrop.classList.remove("open");
    document.body.style.overflow = "";
  }

  if (mobileToggle) {
    mobileToggle.addEventListener("click", openSidebar);
  }
  if (sidebarClose) {
    sidebarClose.addEventListener("click", closeSidebar);
  }
  if (sidebarBackdrop) {
    sidebarBackdrop.addEventListener("click", closeSidebar);
  }
})();
</script>

<style>
.tools-shell {
  padding-bottom: 5rem;
  max-width: 1400px;
  margin: 0 auto;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
}

.tools-hero {
  text-align: center;
  margin-bottom: 2rem;
}

.tools-hero h1 {
  margin: 0.35rem 0;
  font-size: 2.8rem;
  font-family: "Cormorant Garamond", serif;
  font-weight: 300;
  letter-spacing: -0.01em;
}

/* 主布局：侧边栏 + 内容区 */
.tools-layout {
  display: flex;
  gap: 2rem;
  align-items: flex-start;
}

/* 移动端筛选按钮 */
.tools-mobile-toggle {
  display: none;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1rem;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text-main);
  font-size: 0.9rem;
  cursor: pointer;
  margin-bottom: 1rem;
}

.tools-mobile-toggle svg {
  opacity: 0.7;
}

/* 侧边栏 */
.tools-sidebar {
  flex-shrink: 0;
  width: 220px;
  position: sticky;
  top: 2rem;
}

.tools-sidebar__header {
  display: none;
}

.tools-search {
  margin-bottom: 1.5rem;
}

.tools-search input {
  width: 100%;
  padding: 0.6rem 0.875rem;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--surface-highlight);
  color: var(--text-main);
  font-size: 0.875rem;
  outline: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.tools-search input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.15);
}

.tools-filter-group {
  margin-bottom: 1.25rem;
}

.tools-filter-group h4 {
  margin: 0 0 0.6rem;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-muted);
}

.tools-filter-list {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.tools-filter-pill {
  display: block;
  width: 100%;
  text-align: left;
  border: none;
  background: transparent;
  color: var(--text-main);
  padding: 0.45rem 0.75rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: background 0.15s ease, color 0.15s ease;
}

.tools-filter-pill:hover {
  background: var(--surface-highlight);
}

.tools-filter-pill.active {
  background: rgba(212, 175, 55, 0.15);
  color: var(--accent);
}

.tools-filter-toggle {
  display: block;
  width: 100%;
  text-align: left;
  border: none;
  background: transparent;
  color: var(--text-muted);
  padding: 0.45rem 0.75rem;
  cursor: pointer;
  font-size: 0.8rem;
  transition: color 0.15s ease;
}

.tools-filter-toggle:hover {
  color: var(--accent);
}

/* 侧边栏遮罩 */
.tools-sidebar-backdrop {
  display: none;
}

/* 内容区 */
.tools-content {
  flex: 1;
  min-width: 0;
}

.tools-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

.tools-card {
  position: relative;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  display: flex;
  flex-direction: row;
  align-items: stretch;
  gap: 0;
  transition: transform 0.25s ease, background 0.2s ease, border-color 0.2s ease, box-shadow 0.25s ease;
  outline: none;
}

.tools-card:focus-visible {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.25);
}

.tools-card:hover {
  transform: translateY(-4px);
  background: var(--surface-highlight);
  border-color: rgba(255, 255, 255, 0.15);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.tools-logo {
  flex-shrink: 0;
  width: 88px;
  height: 88px;
  overflow: hidden;
  background: var(--surface-highlight);
  display: flex;
  align-items: center;
  justify-content: center;
}

.tools-logo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.tools-card:hover .tools-logo img {
  transform: scale(1.08);
}

.tools-card__meta {
  flex: 1;
  padding: 0.875rem 1rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.4rem;
  min-width: 0;
}

.tools-card h3 {
  margin: 0;
  font-family: "Cormorant Garamond", serif;
  font-weight: 400;
  font-size: 1.25rem;
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tools-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
}

.tools-tag {
  display: inline-block;
  padding: 0.2rem 0.55rem;
  border-radius: 4px;
  font-size: 0.72rem;
  font-weight: 500;
  letter-spacing: 0.02em;
}

.tools-tag--domain {
  background: rgba(212, 175, 55, 0.15);
  color: var(--accent);
}

.tools-tag--company {
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-muted);
}

.tools-card__visit {
  position: absolute;
  right: 0.875rem;
  bottom: 0.65rem;
  color: var(--text-muted);
  font-size: 0.7rem;
  text-decoration: none;
}

.tools-empty {
  margin-top: 2rem;
  text-align: center;
  padding: 2rem;
  border: 1px solid var(--border);
  background: var(--surface-highlight);
  color: var(--text-muted);
}

.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  margin-top: 3rem;
  flex-wrap: wrap;
}

.pagination-link {
  color: var(--text-muted);
  text-decoration: none;
  font-weight: 600;
  transition: color 0.2s ease;
}

.pagination-link.disabled {
  color: var(--text-muted);
  cursor: not-allowed;
}

.pagination-pages {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.pagination-page {
  min-width: 36px;
  text-align: center;
  padding: 0.4rem 0.8rem;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text-main);
  text-decoration: none;
  font-weight: 600;
}

.pagination-page:hover {
  background: var(--surface-highlight);
}

.pagination-page.current {
  background: var(--accent);
  color: #000;
}

.reveal-text {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.reveal-text.active {
  opacity: 1;
  transform: translateY(0);
}

/* 平板端：侧边栏变窄 */
@media (max-width: 1024px) {
  .tools-sidebar {
    width: 180px;
  }

  .tools-layout {
    gap: 1.5rem;
  }
}

/* 移动端：侧边栏变为抽屉 */
@media (max-width: 768px) {
  .tools-layout {
    flex-direction: column;
  }

  .tools-mobile-toggle {
    display: flex;
  }

  .tools-sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--bg);
    border-right: 1px solid var(--border);
    z-index: 1000;
    padding: 1rem;
    overflow-y: auto;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }

  .tools-sidebar.open {
    transform: translateX(0);
  }

  .tools-sidebar__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
    font-weight: 600;
  }

  .tools-sidebar__close {
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0;
    line-height: 1;
  }

  .tools-sidebar__close:hover {
    color: var(--text-main);
  }

  .tools-sidebar-backdrop {
    display: block;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .tools-sidebar-backdrop.open {
    opacity: 1;
    pointer-events: auto;
  }

  .tools-grid {
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }

  .tools-logo {
    width: 72px;
    height: 72px;
  }

  .tools-card__meta {
    padding: 0.75rem 0.875rem;
  }

  .tools-card h3 {
    font-size: 1.1rem;
  }
}

@media (max-width: 480px) {
  .tools-shell {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .tools-logo {
    width: 64px;
    height: 64px;
  }

  .tools-card__meta {
    padding: 0.65rem 0.75rem;
    gap: 0.3rem;
  }

  .tools-card h3 {
    font-size: 1rem;
  }

  .tools-tag {
    font-size: 0.68rem;
    padding: 0.15rem 0.45rem;
  }

  .tools-card__visit {
    right: 0.65rem;
    bottom: 0.5rem;
    font-size: 0.65rem;
  }
}
</style>
{{ end }}
