{{ define "main" }}
{{ $about := site.GetPage "section" "about" }}
{{ $latestDaily := first 1 (sort (where site.RegularPages "Section" "daily") "Date" "desc") }}
{{ $latestHighlight := first 1 (sort (where site.RegularPages "Section" "highlights") "Date" "desc") }}
{{ $latestPrompt := first 1 (sort (where site.RegularPages "Section" "prompts") "Date" "desc") }}
{{ $latestCuration := first 1 (sort (where site.RegularPages "Section" "curations") "Date" "desc") }}
{{ $latestPublish := first 1 (sort (where site.RegularPages "Section" "my-publish") "Date" "desc") }}

<section class="section hero">
  <div class="section-narrow">
    <div class="reveal-text">
      <h1>Bubble's</h1>
      <h1><span class="indent">Brain</span></h1>
    </div>

    <div class="hero-image-container">
      <img src="https://images.unsplash.com/photo-1486718448742-163732cd1544?q=80&w=2600&auto=format&fit=crop" alt="Architecture" class="hero-img">
    </div>

    <div class="hero-meta reveal-text">
      <span>Est. 2024</span>
      <span>Scroll to Explore</span>
      <span>Global // Digital</span>
    </div>
  </div>
</section>

<section class="section grid-section">
  <div class="section-narrow">
    <div class="section-title">{{ i18n "home_collection_title" }}</div>

    <div class="bento-grid">
      <div class="card card-lg">
        <div>
          <div class="card-number">01</div>
          <h3>{{ i18n "home_daily_title" }}</h3>
        </div>
        {{ with index $latestDaily 0 }}
          <p>{{ .Description | default (.Summary | plainify) | default (i18n "home_daily_default_desc") | truncate 140 }}</p>
          <a class="card-link" href="{{ .RelPermalink }}">{{ i18n "home_read_prefix" }} {{ .Title }}</a>
        {{ else }}
          <p>{{ i18n "home_daily_default_desc" }}</p>
          <span class="card-link">{{ i18n "home_pending" }}</span>
        {{ end }}
      </div>

      <div class="card card-sm card-tall">
        <div>
          <div class="card-number">02</div>
          <h3>{{ i18n "home_highlights_title" }}</h3>
        </div>
        <div>
          {{ with index $latestHighlight 0 }}
            <p>{{ .Description | default (.Summary | plainify) | default (i18n "home_highlights_default_desc") | truncate 120 }}</p>
            <a class="card-link" href="{{ .RelPermalink }}">{{ i18n "home_view_prefix" }} {{ .Title }}</a>
          {{ else }}
            <p>{{ i18n "home_highlights_default_desc" }}</p>
            <span class="card-link">{{ i18n "home_pending" }}</span>
          {{ end }}
        </div>
      </div>

      <div class="card card-sm">
        <div>
          <div class="card-number">03</div>
          <h3>{{ i18n "home_prompts_title" }}</h3>
        </div>
        {{ with index $latestPrompt 0 }}
          <p>{{ .Description | default (.Summary | plainify) | default (i18n "home_prompts_default_desc") | truncate 120 }}</p>
          <a class="card-link" href="{{ .RelPermalink }}">{{ i18n "home_view_prefix" }} {{ .Title }}</a>
        {{ else }}
          <p>{{ i18n "home_prompts_default_desc" }}</p>
          <span class="card-link">{{ i18n "home_pending" }}</span>
        {{ end }}
      </div>

      <div class="card card-sm">
        <div>
          <div class="card-number">04</div>
          <h3>{{ i18n "home_curations_title" }}</h3>
        </div>
        {{ with index $latestCuration 0 }}
          <p>{{ .Description | default (.Summary | plainify) | default (i18n "home_curations_default_desc") | truncate 120 }}</p>
          <a class="card-link" href="{{ .RelPermalink }}">{{ i18n "home_view_prefix" }} {{ .Title }}</a>
        {{ else }}
          <p>{{ i18n "home_curations_default_desc" }}</p>
          <span class="card-link">{{ i18n "home_pending" }}</span>
        {{ end }}
      </div>

      <div class="card card-sm">
        <div>
          <div class="card-number">05</div>
          <h3>{{ i18n "home_model_evals_title" }}</h3>
        </div>
        <p>{{ i18n "home_model_evals_desc" }}</p>
        <a class="card-link" href="{{ "/model-evals/" | relLangURL }}">{{ i18n "home_model_evals_link" }}</a>
      </div>

      <div class="card card-lg">
        <div>
          <div class="card-number">06</div>
          <h3>{{ i18n "home_my_posts_title" }}</h3>
        </div>
        <div style="display:flex; align-items:center; justify-content: space-between; gap: 1rem;">
          {{ with index $latestPublish 0 }}
            <p style="text-align:left;">{{ .Description | default (.Summary | plainify) | default (i18n "home_my_posts_default_desc") | truncate 160 }}</p>
            <a class="card-link" href="{{ .RelPermalink }}">{{ i18n "home_go_prefix" }} {{ .Title }}</a>
          {{ else }}
            <p style="text-align:left;">{{ i18n "home_my_posts_default_desc" }}</p>
            <span class="card-link">{{ i18n "home_pending" }}</span>
          {{ end }}
        </div>
      </div>

      <div class="card card-sm">
        <div>
          <div class="card-number">07</div>
          <h3>{{ i18n "home_x_trending_title" }}</h3>
        </div>
        <p>{{ i18n "home_x_trending_desc" }}</p>
        <a class="card-link" href="{{ "/x-trending/" | relLangURL }}">{{ i18n "home_x_trending_link" }}</a>
      </div>
    </div>
  </div>
</section>

{{ if $about }}
  <section class="section">
    <div class="section-narrow page-surface">
      <div class="page-header">
        <span class="page-eyebrow">{{ or $about.Params.description (i18n "about_eyebrow_fallback") }}</span>
        <h1>{{ $about.Title }}</h1>
      </div>
      <div class="page-body">
        {{ $about.Content }}
      </div>
    </div>
  </section>
{{ end }}
{{ end }}
