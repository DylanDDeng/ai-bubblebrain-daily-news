{{ define "main" }}
<section class="section">
  <div class="section-narrow daily-list-container">
    <header class="prompt-hero">
      <p class="page-eyebrow">{{ i18n "prompts_eyebrow" }}</p>
      <h1>{{ .Title }}</h1>
      {{ with .Description }}
        <p class="page-desc">{{ . }}</p>
      {{ end }}
    </header>

    {{ $paginator := .Paginate (.Pages.ByDate.Reverse) 9 }}

    {{ if $paginator.Pages }}
      <div class="daily-grid">
        {{ range $index, $page := $paginator.Pages }}
          {{ $model := $page.Params.model | default (i18n "prompts_model_fallback") }}
          {{ $tone := $page.Params.tone }}
          {{ $tags := $page.Params.tags }}
          <article class="daily-card prompt-card reveal-text{{ if lt $index 6 }} active{{ end }}">
            <div class="card-header">
              <h2>
                <a href="{{ $page.Permalink }}">{{ $page.Title }}</a>
              </h2>
              <time datetime="{{ $page.Date.Format "2006-01-02" }}">
                {{ $page.Date.Format (i18n "date_format") }}
              </time>
            </div>

            <div class="card-content">
              {{ with $page.Description }}
                <p>{{ . }}</p>
              {{ else }}
                <p>{{ $page.Summary | truncate 200 }}</p>
              {{ end }}
              {{ if and $tags (gt (len $tags) 0) }}
                <div class="prompt-tags">
                  {{ range $index, $tag := $tags }}
                    {{ if lt $index 3 }}<span>{{ $tag }}</span>{{ end }}
                  {{ end }}
                </div>
              {{ end }}
            </div>

            <div class="prompt-pillset">
              <span class="prompt-pill">{{ i18n "prompts_recommended_model" }}{{ $model }}</span>
              {{ if $tone }}
                <span class="prompt-pill">{{ i18n "prompts_tone" }}{{ $tone }}</span>
              {{ end }}
            </div>

            <div class="card-footer">
              <a class="read-more" href="{{ $page.Permalink }}">{{ i18n "prompts_view_prompt" }}</a>
            </div>
          </article>
        {{ end }}
      </div>

      {{ if gt $paginator.TotalPages 1 }}
        <nav class="pagination" aria-label="{{ i18n "prompts_pagination_aria" }}">
          {{ if $paginator.HasPrev }}
            <a class="pagination-link" href="{{ $paginator.Prev.URL }}">{{ i18n "pagination_prev" }}</a>
          {{ else }}
            <span class="pagination-link disabled">{{ i18n "pagination_prev" }}</span>
          {{ end }}

          <div class="pagination-pages">
            {{ range $pager := $paginator.Pagers }}
              {{ if eq $pager.PageNumber $paginator.PageNumber }}
                <span class="pagination-page current">{{ $pager.PageNumber }}</span>
              {{ else }}
                <a class="pagination-page" href="{{ $pager.URL }}">{{ $pager.PageNumber }}</a>
              {{ end }}
            {{ end }}
          </div>

          {{ if $paginator.HasNext }}
            <a class="pagination-link" href="{{ $paginator.Next.URL }}">{{ i18n "pagination_next" }}</a>
          {{ else }}
            <span class="pagination-link disabled">{{ i18n "pagination_next" }}</span>
          {{ end }}
        </nav>
      {{ end }}
    {{ else }}
      <div class="empty-state">
        <p>{{ i18n "prompts_empty_title" }}</p>
        <p>{{ i18n "prompts_empty_hint" }}</p>
      </div>
    {{ end }}
  </div>
</section>

<style>
.prompt-hero {
  text-align: center;
  margin-bottom: 2.5rem;
}

.prompt-hero h1 {
  margin: 0.5rem 0;
  font-size: 2.6rem;
  font-family: "Cormorant Garamond", serif;
  font-weight: 300;
  letter-spacing: -0.01em;
}

.prompt-hero .page-desc {
  max-width: 60ch;
  margin: 0.5rem auto 0;
}

.prompt-card .card-content p {
  margin-bottom: 0.9rem;
}

.prompt-tags {
  display: flex;
  gap: 0.4rem;
  flex-wrap: wrap;
  margin-top: 0.75rem;
}

.prompt-tags span {
  background: var(--surface-highlight);
  padding: 0.2rem 0.6rem;
  border-radius: 999px;
  font-size: 0.8rem;
}

.prompt-pillset {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  margin: 1rem 0;
}

.prompt-pill {
  background: var(--surface-highlight);
  border-radius: 999px;
  padding: 0.35rem 1rem;
  font-size: 0.9rem;
  color: var(--text-main);
  border: 1px solid var(--border);
}
</style>
{{ end }}
