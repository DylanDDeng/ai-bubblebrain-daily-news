{{ define "main" }}
<section class="section">
  <div class="section-narrow highlight-shell">
    <header class="page-header gallery-hero">
      <p class="page-eyebrow">{{ i18n "highlights_eyebrow" }}</p>
      <h1>{{ .Title }}</h1>
      {{ with .Description }}
        <p class="page-desc">{{ . }}</p>
      {{ end }}
    </header>

    <div class="highlight-actions">
      <div class="highlight-search">
        <input type="search" id="highlight-search" placeholder="{{ i18n "highlights_search_placeholder" }}" aria-label="{{ i18n "highlights_search_aria" }}">
      </div>
      <div class="highlight-filter-row" id="highlight-filters" aria-label="{{ i18n "highlights_filter_aria" }}"></div>
	    </div>

	    <div id="highlight-grid" class="highlight-grid" aria-live="polite"></div>
	    <div id="highlight-empty" class="highlight-empty" hidden>
	      <p>{{ i18n "highlights_empty_title" }}</p>
	      <p>{{ i18n "highlights_empty_hint" }}</p>
	    </div>
    <div id="highlight-empty-filter" class="highlight-empty" hidden>
      <p>{{ i18n "highlights_empty_filter_title" }}</p>
      <p>{{ i18n "highlights_empty_filter_hint" }}</p>
    </div>
  </div>
</section>

<div class="highlight-modal" id="highlight-modal" aria-hidden="true">
  <div class="highlight-modal__backdrop" data-close></div>
  <div class="highlight-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="highlight-modal-title">
    <button class="highlight-modal__close" type="button" data-close aria-label="{{ i18n "highlights_modal_close" }}">×</button>
    <div class="highlight-modal__body">
      <div class="highlight-modal__image">
        <img id="highlight-modal-image" alt="">
        <div class="highlight-modal-loader" id="highlight-modal-loader"></div>
      </div>
	      <div class="highlight-modal__meta">
	        <p class="modal-eyebrow" id="highlight-modal-source">{{ i18n "highlights_modal_eyebrow" }}</p>
	        <h2 id="highlight-modal-title"></h2>
	        <div class="highlight-modal__tags" id="highlight-modal-tags"></div>
	        <p class="highlight-modal__desc" id="highlight-modal-desc"></p>
	        <div class="highlight-modal__links">
          <a class="highlight-link highlight-link--cta" id="highlight-modal-original" target="_blank" rel="noopener noreferrer">{{ i18n "highlights_read_original" | default (cond (eq .Site.LanguageCode "zh-CN") "阅读原文 →" "Read original →") }}</a>
          <a class="highlight-link highlight-link--cta highlight-link--detail" id="highlight-modal-detail" href="#">{{ i18n "highlights_read_detail" | default (cond (eq .Site.LanguageCode "zh-CN") "详细解读 →" "Read detail →") }}</a>
        </div>
	      </div>
		    </div>
		  </div>
		</div>

<script>
(() => {
  const dataUrl = "{{ "/highlights.json" | relLangURL }}";

  // COS 图片优化：为腾讯云 COS 图片添加处理参数
  const COS_THUMB_PARAMS = "?imageMogr2/format/webp/thumbnail/400x/quality/85";
  const COS_MODAL_PARAMS = "?imageMogr2/format/webp/thumbnail/1200x/quality/90";

  function optimizeImageUrl(url, isThumb = true) {
    if (!url || typeof url !== "string") return url;
    if (!url.includes(".cos.")) return url;
    if (url.includes("?")) return url;
    return url + (isThumb ? COS_THUMB_PARAMS : COS_MODAL_PARAMS);
  }


  const MAX_TAGS_VISIBLE = 8;
  let filtersCollapsed = true;

  const I18N = {
    allWithCount: "{{ i18n "highlights_all_with_count" }}",
    untitled: "{{ i18n "highlights_untitled" }}",
    defaultAlt: "{{ i18n "highlights_default_alt" }}",
    defaultEyebrow: "{{ i18n "highlights_modal_eyebrow" }}",
    readOriginal: "{{ i18n "highlights_read_original" | default (cond (eq .Site.LanguageCode "zh-CN") "阅读原文 →" "Read original →") }}",
    expandTags: "{{ i18n "highlights_expand_tags" | default (cond (eq .Site.LanguageCode "zh-CN") "展开更多 (+{count})" "Show more (+{count})") }}",
    collapseTags: "{{ i18n "highlights_collapse_tags" | default (cond (eq .Site.LanguageCode "zh-CN") "收起" "Collapse") }}"
  };
  const grid = document.getElementById("highlight-grid");
  const empty = document.getElementById("highlight-empty");
  const filtersWrap = document.getElementById("highlight-filters");
  const filterEmpty = document.getElementById("highlight-empty-filter");
  const searchInput = document.getElementById("highlight-search");
  const modal = document.getElementById("highlight-modal");
  const modalImage = document.getElementById("highlight-modal-image");
	  const modalTitle = document.getElementById("highlight-modal-title");
	  const modalSource = document.getElementById("highlight-modal-source");
	  const modalTags = document.getElementById("highlight-modal-tags");
	  const modalDesc = document.getElementById("highlight-modal-desc");
	  const modalOriginal = document.getElementById("highlight-modal-original");
  const modalDetail = document.getElementById("highlight-modal-detail");
	  let activeFocus = null;
	  let allItems = [];
	  let filteredItems = [];
	  let currentFilter = "all";
	  let searchTerm = "";

  function setEmpty(isEmpty) {
    if (empty) empty.hidden = !isEmpty;
  }

  function setFilterEmpty(isEmpty) {
    if (filterEmpty) filterEmpty.hidden = !isEmpty;
  }

  function collectTags(items) {
    const tags = new Set();
    items.forEach((item) => {
      const arr = Array.isArray(item.tags) ? item.tags : [];
      arr.forEach((tag) => {
        if (tag) tags.add(tag.toString().trim());
      });
    });
    return Array.from(tags).filter(Boolean);
  }

  function collectTagCounts(items) {
    const counts = Object.create(null);
    items.forEach((item) => {
      const tags = Array.isArray(item.tags) ? item.tags : [];
      const uniq = new Set(
        tags
          .map((t) => (t || "").toString().trim())
          .filter(Boolean)
      );
      uniq.forEach((tag) => {
        counts[tag] = (counts[tag] || 0) + 1;
      });
    });
    return counts;
  }

  function renderFilters(tags) {
    if (!filtersWrap) return;
    filtersWrap.innerHTML = "";

    // 根据折叠状态决定显示哪些标签
    const visibleTags = (() => {
      if (!filtersCollapsed) return tags;
      const base = tags.slice(0, MAX_TAGS_VISIBLE);
      // 确保当前选中的标签始终可见
      if (currentFilter !== "all" && tags.includes(currentFilter) && !base.includes(currentFilter)) {
        base.push(currentFilter);
      }
      return base;
    })();

    const frag = document.createDocumentFragment();
    const currentFilterLower = (currentFilter || "all").toString().trim().toLowerCase();

    // "全部" 按钮
    const allBtn = document.createElement("button");
    allBtn.className = "highlight-filter-pill" + (currentFilterLower === "all" ? " active" : "");
    allBtn.textContent = I18N.allWithCount.replace("{count}", String(allItems.length));
    allBtn.dataset.tag = "all";
    frag.appendChild(allBtn);

    const counts = collectTagCounts(allItems);
    visibleTags.forEach((tag) => {
      const btn = document.createElement("button");
      const isActive = currentFilterLower !== "all" && currentFilterLower === (tag || "").toString().trim().toLowerCase();
      btn.className = "highlight-filter-pill" + (isActive ? " active" : "");
      btn.textContent = `${tag} @${counts[tag] || 0}`;
      btn.dataset.tag = tag;
      frag.appendChild(btn);
    });

    // 展开/收起按钮
    if (tags.length > MAX_TAGS_VISIBLE) {
      const toggle = document.createElement("button");
      toggle.className = "highlight-filter-toggle";
      toggle.type = "button";
      const more = tags.length - MAX_TAGS_VISIBLE;
      toggle.textContent = filtersCollapsed
        ? I18N.expandTags.replace("{count}", String(more))
        : I18N.collapseTags;
      toggle.addEventListener("click", () => {
        filtersCollapsed = !filtersCollapsed;
        renderFilters(tags);
      });
      frag.appendChild(toggle);
    }

    filtersWrap.appendChild(frag);

    // 绑定过滤按钮点击事件
    filtersWrap.querySelectorAll("button[data-tag]").forEach((btn) => {
      btn.addEventListener("click", () => {
        currentFilter = btn.dataset.tag || "all";
        filtersWrap.querySelectorAll("button[data-tag]").forEach((el) => el.classList.remove("active"));
        btn.classList.add("active");
        applyFilter();
      });
    });
  }

  function buildCard(item) {
    if (!item) return null;
    const imgUrl = item.thumb || item.full || "";
    if (!imgUrl) return null;

    const card = document.createElement("article");
    card.className = "highlight-card reveal-text";
    card.setAttribute("tabindex", "0");
    card.setAttribute("role", "button");

    const thumb = document.createElement("div");
    thumb.className = "highlight-thumb loading";

    const img = document.createElement("img");
    // 使用 COS 优化后的缩略图 URL
    img.src = optimizeImageUrl(imgUrl, true);
    img.alt = item.title || I18N.defaultAlt;
    img.loading = "lazy";

    // 图片加载完成
    img.onload = () => {
      thumb.classList.remove("loading");
    };

    // 图片加载失败处理
    img.onerror = () => {
      thumb.classList.remove("loading");
      thumb.classList.add("error");
      img.style.display = "none";
      const errorPlaceholder = document.createElement("div");
      errorPlaceholder.className = "highlight-error-placeholder";
      errorPlaceholder.innerHTML = '<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg><span>加载失败</span>';
      thumb.appendChild(errorPlaceholder);
    };

    const overlay = document.createElement("div");
    overlay.className = "highlight-overlay";

    const title = document.createElement("h3");
    title.className = "highlight-overlay__title";
    title.textContent = item.title || I18N.untitled;

    overlay.appendChild(title);
    thumb.appendChild(img);
    thumb.appendChild(overlay);
    card.appendChild(thumb);

    card.addEventListener("click", () => openModal(item));
    card.addEventListener("keydown", (event) => {
      if (event.key === "Enter" || event.key === " ") {
        event.preventDefault();
        openModal(item);
      }
    });

    return card;
  }

  function renderGrid() {
    if (!grid) return;
    grid.innerHTML = "";

    const totalItems = filteredItems.length;
    if (!totalItems) return;

    const frag = document.createDocumentFragment();
    filteredItems.forEach((item) => {
      const card = buildCard(item);
      if (card) frag.appendChild(card);
    });

    grid.appendChild(frag);

    requestAnimationFrame(() => {
      const elements = Array.from(grid.querySelectorAll(".reveal-text"));
      elements.forEach((el, index) => {
        if (index >= 60) {
          el.classList.add("active");
          return;
        }
        setTimeout(() => el.classList.add("active"), index * 50);
      });
    });
  }

  function applyFilter() {
    if (!allItems.length) return;

    const term = searchTerm.trim().toLowerCase();
    const matchesSearch = (item) => {
      if (!term) return true;
      const haystack = [
        item.title,
        item.description,
        ...(Array.isArray(item.tags) ? item.tags : [])
      ]
        .map((v) => (v || "").toString().toLowerCase())
        .join(" ");
      return haystack.includes(term);
    };

    const byTag = (item) => {
      if (currentFilter === "all") return true;
      const filterLower = currentFilter.toLowerCase();
      const tags = Array.isArray(item.tags) ? item.tags : [];
      return tags.some((tag) => (tag || "").toString().trim().toLowerCase() === filterLower);
    };

    filteredItems = allItems.filter((item) => byTag(item) && matchesSearch(item));

    const noMatch = filteredItems.length === 0;
    setFilterEmpty(noMatch && (currentFilter !== "all" || term));
    renderGrid();
  }

  const modalLoader = document.getElementById("highlight-modal-loader");

  function openModal(item) {
    if (!modal) return;
    activeFocus = document.activeElement;
    const imgUrl = item.full || item.thumb || "";

    // 渐进式加载：先显示缩略图，再加载高清图
    const thumbUrl = optimizeImageUrl(imgUrl, true);
    const fullUrl = optimizeImageUrl(imgUrl, false);

    // 1. 立即显示缩略图（已缓存）
    modalImage.classList.remove("loaded");
    modalImage.classList.add("loading-blur");
    modalImage.src = thumbUrl;
    modalImage.alt = item.title || I18N.defaultAlt;

    // 显示加载指示器
    if (modalLoader) modalLoader.classList.add("active");

    // 2. 后台加载高清图
    const hdImage = new Image();
    hdImage.onload = () => {
      modalImage.src = fullUrl;
      modalImage.classList.remove("loading-blur");
      modalImage.classList.add("loaded");
      if (modalLoader) modalLoader.classList.remove("active");
    };
    hdImage.onerror = () => {
      modalImage.classList.remove("loading-blur");
      modalImage.classList.add("loaded");
      if (modalLoader) modalLoader.classList.remove("active");
    };
    hdImage.src = fullUrl;

    modalTitle.textContent = item.title || I18N.untitled;
    if (modalSource) {
      modalSource.textContent = I18N.defaultEyebrow;
    }
    modalTags.innerHTML = "";
    (Array.isArray(item.tags) ? item.tags : []).forEach((tag) => {
      const span = document.createElement("span");
      span.textContent = tag;
      modalTags.appendChild(span);
    });
    modalDesc.textContent = item.description || "";
    if (item.originalUrl) {
      modalOriginal.href = item.originalUrl;
      modalOriginal.textContent = I18N.readOriginal;
      modalOriginal.style.display = "";
    } else {
      modalOriginal.style.display = "none";
    }

    // 处理详细解读链接
    if (modalDetail) {
      if (item.detailUrl) {
        modalDetail.href = item.detailUrl;
        modalDetail.style.display = "";
      } else {
        modalDetail.style.display = "none";
      }
    }

    modal.classList.add("open");
    modal.setAttribute("aria-hidden", "false");
    document.body.style.overflow = "hidden";
  }

  function closeModal() {
    if (!modal) return;
    modal.classList.remove("open");
    modal.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
    if (activeFocus && typeof activeFocus.focus === "function") {
      activeFocus.focus();
    }
    activeFocus = null;
  }

  if (modal) {
    modal.querySelectorAll("[data-close]").forEach((el) => {
      el.addEventListener("click", closeModal);
    });

    document.addEventListener("keydown", (event) => {
      if (event.key === "Escape" && modal.classList.contains("open")) {
        closeModal();
      }
    });
  }

  function render(items) {
    if (!items || !items.length) {
      setEmpty(true);
      return;
    }

    setEmpty(false);
    allItems = items;
    filteredItems = [...allItems];
    renderFilters(collectTags(allItems));
    setFilterEmpty(false);
    renderGrid();
  }

  if (searchInput) {
    searchInput.addEventListener("input", (event) => {
      searchTerm = event.target.value || "";
      applyFilter();
    });
  }

  fetch(dataUrl)
    .then((res) => {
      if (!res.ok) throw new Error("网络异常");
      return res.json();
    })
    .then((items) => render(items))
    .catch(() => {
      setEmpty(true);
    });
})();
</script>

<style>
.highlight-shell {
  padding-bottom: 5rem;
}

.gallery-hero {
  text-align: center;
  margin-bottom: 2.5rem;
}

.gallery-hero h1 {
  margin: 0.35rem 0;
  font-size: 2.8rem;
  font-family: "Cormorant Garamond", serif;
  font-weight: 300;
  letter-spacing: -0.01em;
}

.highlight-actions {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  margin: 1rem 0 2rem;
}

.highlight-search {
  width: 100%;
  max-width: 500px;
  margin: 0 auto;
}

.highlight-search input {
  width: 100%;
  padding: 0.7rem 1rem;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface-highlight);
  color: var(--text-main);
  font-size: 0.95rem;
  outline: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.highlight-search input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
}

.highlight-filter-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem;
  margin: 1rem 0 2rem;
}

.highlight-filter-pill {
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text-main);
  padding: 0.35rem 0.9rem;
  border-radius: 999px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.highlight-filter-pill:hover {
  border-color: var(--accent);
}

.highlight-filter-pill.active {
  background: var(--accent);
  color: #000;
  border-color: var(--accent);
}

/* 标签折叠按钮 */
.highlight-filter-toggle {
  border: 1px dashed var(--border);
  background: var(--surface-highlight);
  color: var(--text-muted);
  padding: 0.35rem 0.9rem;
  border-radius: 999px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: color 0.2s ease, border-color 0.2s ease;
}

.highlight-filter-toggle:hover {
  color: var(--accent);
  border-color: var(--accent);
}

.highlight-grid {
  column-gap: 1.25rem;
  column-width: 300px;
}

.highlight-card {
  position: relative;
  display: inline-block;
  width: 100%;
  margin: 0 0 1.25rem;
  background: var(--surface-highlight);
  border: 1px solid var(--border);
  border-radius: 0;
  overflow: hidden;
  cursor: zoom-in;
  break-inside: avoid;
  -webkit-column-break-inside: avoid;
  page-break-inside: avoid;
  transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
  outline: none;
}

.highlight-card:hover {
  transform: translateY(-4px);
  border-color: rgba(255, 255, 255, 0.14);
  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.35);
}

.highlight-card:focus-visible {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.25), 0 14px 30px rgba(0, 0, 0, 0.35);
}

.highlight-thumb {
  position: relative;
  overflow: hidden;
  background: var(--surface-highlight);
  line-height: 0;
}

.highlight-thumb img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 0 !important;
  transition: transform 0.8s ease, opacity 0.3s ease;
}

.highlight-card:hover .highlight-thumb img {
  transform: scale(1.03);
}

/* 图片加载骨架屏 shimmer 效果 */
.highlight-thumb.loading {
  min-height: 180px;
  background: linear-gradient(90deg, var(--surface-highlight) 25%, var(--surface) 50%, var(--surface-highlight) 75%);
  background-size: 200% 100%;
  animation: highlight-shimmer 1.5s infinite;
}

.highlight-thumb.loading img {
  opacity: 0;
}

.highlight-thumb:not(.loading) img {
  opacity: 1;
}

@keyframes highlight-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* 图片加载错误状态 */
.highlight-thumb.error {
  min-height: 180px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.highlight-error-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  color: var(--text-muted);
  padding: 1rem;
}

.highlight-error-placeholder svg {
  opacity: 0.5;
}

.highlight-error-placeholder span {
  font-size: 0.85rem;
}

.highlight-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: flex-end;
  padding: 1rem;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0) 55%, rgba(0, 0, 0, 0.78) 100%);
  pointer-events: none;
}

.highlight-overlay__title {
  margin: 0;
  font-family: "Cormorant Garamond", serif;
  font-weight: 300;
  font-size: 1.55rem;
  color: #fff;
  line-height: 1.2;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.highlight-link {
  color: var(--accent);
  font-weight: 600;
  letter-spacing: 0.05em;
  text-decoration: none;
  margin-left: 0;
}

.highlight-link:hover {
  text-decoration: underline;
}

.highlight-link--cta {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: fit-content;
  padding: 0.55rem 1rem;
  border-radius: 999px;
  border: 1px solid var(--accent);
  background: transparent;
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.highlight-link--cta:hover {
  background: var(--accent);
  color: #000;
  border-color: var(--accent);
  text-decoration: none;
}

/* 详细解读按钮 - 使用不同颜色区分 */
.highlight-link--detail {
  border-color: var(--text-muted);
  color: var(--text-main);
}

.highlight-link--detail:hover {
  background: var(--text-main);
  color: var(--surface);
  border-color: var(--text-main);
}

/* Modal 链接容器 */
.highlight-modal__links {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 0.5rem;
}

.highlight-empty {
  margin-top: 2rem;
  text-align: center;
  padding: 2rem;
  border: 1px solid var(--border);
  background: var(--surface-highlight);
  color: var(--text-muted);
}

.highlight-modal {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 2000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease;
}

.highlight-modal.open {
  opacity: 1;
  pointer-events: auto;
}

.highlight-modal__backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(6px);
}

.highlight-modal__dialog {
  position: relative;
  max-width: 960px;
  width: min(92vw, 960px);
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.55);
}

.highlight-modal__body {
  display: grid;
  grid-template-columns: 1fr 0.9fr;
  gap: 1.25rem;
  padding: 1.25rem;
}

.highlight-modal__image {
  border: 1px solid var(--border);
  background: var(--surface-highlight);
  padding: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.highlight-modal__image img {
  max-width: 100%;
  height: auto;
  border-radius: 0 !important;
  transition: filter 0.3s ease, opacity 0.3s ease;
}

/* 渐进式加载 - 缩略图模糊状态 */
.highlight-modal__image img.loading-blur {
  filter: blur(8px);
  transform: scale(1.02);
}

/* 渐进式加载 - 高清图加载完成 */
.highlight-modal__image img.loaded {
  filter: blur(0);
  transform: scale(1);
}

/* 模态框加载指示器 */
.highlight-modal-loader {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  border: 3px solid var(--border);
  border-top-color: var(--accent);
  border-radius: 50%;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
}

.highlight-modal-loader.active {
  opacity: 1;
  animation: highlight-modal-spin 0.8s linear infinite;
}

@keyframes highlight-modal-spin {
  to { transform: translate(-50%, -50%) rotate(360deg); }
}

.highlight-modal__meta h2 {
  margin: 0.3rem 0 0.8rem;
  font-family: "Cormorant Garamond", serif;
  font-weight: 300;
  letter-spacing: -0.01em;
}

.highlight-modal__tags {
  display: flex;
  gap: 0.4rem;
  flex-wrap: wrap;
  margin: 0.5rem 0 0.75rem;
}

.highlight-modal__tags span {
  background: var(--surface-highlight);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 0.25rem 0.8rem;
  font-size: 0.85rem;
}

.highlight-modal__desc {
  color: var(--text-muted);
  margin: 0.25rem 0 0.75rem;
  line-height: 1.6;
}

.highlight-modal__close {
  position: absolute;
  top: 0.6rem;
  right: 0.6rem;
  background: var(--surface-highlight);
  color: var(--text-main);
  border: 1px solid var(--border);
  border-radius: 999px;
  width: 38px;
  height: 38px;
  font-size: 1.2rem;
  cursor: pointer;
}

.highlight-modal__close:hover {
  color: var(--accent);
}

@media (max-width: 900px) {
  .highlight-modal__body {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 640px) {
  .highlight-grid {
    column-width: auto;
    column-count: 1;
  }

  .highlight-modal__dialog {
    width: 94vw;
  }
}
</style>
{{ end }}
