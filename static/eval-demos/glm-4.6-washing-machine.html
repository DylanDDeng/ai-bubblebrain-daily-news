<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´—è¡£æœºå·¥ä½œåŸç† - SVGåŠ¨ç”»æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-container {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 1200px;
            width: 100%;
        }

        .svg-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
        }

        .controls-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-width: 300px;
        }

        .controls-panel h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .stage-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .stage-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stage-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .stage-btn.active {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .auto-btn {
            grid-column: span 2;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        }

        .auto-btn:hover {
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .status-panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .status-panel h4 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-label {
            color: #666;
            font-weight: 500;
        }

        .status-value {
            color: #333;
            font-weight: bold;
            padding: 5px 10px;
            background: #e9ecef;
            border-radius: 5px;
        }

        .status-value.active {
            background: #4CAF50;
            color: white;
        }

        .info-panel {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border-left: 4px solid #2196F3;
        }

        .info-panel h4 {
            color: #1976D2;
            margin-bottom: 10px;
        }

        .info-panel p {
            color: #555;
            line-height: 1.6;
            font-size: 14px;
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #666;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            border: 1px solid #ddd;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
                align-items: center;
            }

            .controls-panel {
                min-width: 100%;
            }

            .stage-buttons {
                grid-template-columns: 1fr;
            }

            .auto-btn {
                grid-column: span 1;
            }
        }

        /* åŠ¨ç”»çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .animation-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ff6b6b;
            margin-left: 5px;
            animation: blink 1s infinite;
        }

        .animation-indicator.running {
            background: #4CAF50;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸŒ€ æ´—è¡£æœºå·¥ä½œåŸç†</h1>
        <p>é€šè¿‡SVGåŠ¨ç”»äº†è§£æ´—è¡£æœºçš„å››ä¸ªå·¥ä½œé˜¶æ®µ</p>
    </div>

    <div class="main-container">
        <div class="svg-container">
            <svg width="600" height="700" viewBox="0 0 600 700" xmlns="http://www.w3.org/2000/svg">
                <!-- å®šä¹‰æ¸å˜å’Œæ»¤é•œ -->
                <defs>
                    <!-- æ°´çš„æ¸å˜ -->
                    <linearGradient id="waterGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#4FC3F7;stop-opacity:0.8" />
                        <stop offset="100%" style="stop-color:#1976D2;stop-opacity:0.9" />
                    </linearGradient>

                    <!-- æ³¡æ²«æ¸å˜ -->
                    <radialGradient id="foamGradient">
                        <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.9" />
                        <stop offset="100%" style="stop-color:#e3f2fd;stop-opacity:0.6" />
                    </radialGradient>

                    <!-- æ´—è¡£æœºå¤–å£³æ¸å˜ -->
                    <linearGradient id="machineGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#f5f5f5" />
                        <stop offset="100%" style="stop-color:#e0e0e0" />
                    </linearGradient>

                    <!-- é˜´å½±æ»¤é•œ -->
                    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                        <feOffset dx="2" dy="2" result="offsetblur"/>
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.3"/>
                        </feComponentTransfer>
                        <feMerge>
                            <feMergeNode/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>

                    <!-- æ°´æ»´æ»¤é•œ -->
                    <filter id="waterDrop">
                        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
                        <feOffset dx="0" dy="1" result="offsetblur"/>
                        <feComponentTransfer>
                            <feFuncA type="linear" slope="0.5"/>
                        </feComponentTransfer>
                        <feMerge>
                            <feMergeNode in="offsetblur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>

                <!-- èƒŒæ™¯ -->
                <rect width="600" height="700" fill="#f8f9fa" />

                <!-- æ´—è¡£æœºå¤–å£³ -->
                <rect x="50" y="50" width="500" height="600" rx="20" ry="20"
                      fill="url(#machineGradient)" stroke="#bdbdbd" stroke-width="2" filter="url(#shadow)"/>

                <!-- æ´—è¡£æœºé¡¶éƒ¨ -->
                <rect x="50" y="50" width="500" height="80" rx="20" ry="20"
                      fill="#e0e0e0" stroke="#bdbdbd" stroke-width="2"/>

                <!-- æ§åˆ¶é¢æ¿ -->
                <rect x="100" y="70" width="400" height="40" rx="5" ry="5" fill="#424242"/>

                <!-- æ§åˆ¶æŒ‰é’® -->
                <circle cx="130" cy="90" r="8" fill="#4CAF50" class="power-btn"/>
                <circle cx="160" cy="90" r="8" fill="#2196F3" class="start-btn"/>
                <circle cx="190" cy="90" r="8" fill="#FF9800" class="pause-btn"/>

                <!-- æ˜¾ç¤ºå± -->
                <rect x="220" y="80" width="120" height="20" rx="3" ry="3" fill="#263238"/>
                <text x="280" y="94" text-anchor="middle" fill="#4CAF50" font-size="12" font-family="monospace" id="display">å‡†å¤‡å°±ç»ª</text>

                <!-- è¿›åº¦æ¡ -->
                <rect x="360" y="88" width="100" height="4" rx="2" ry="2" fill="#37474f"/>
                <rect x="360" y="88" width="0" height="4" rx="2" ry="2" fill="#4CAF50" id="progressBar">
                    <animate attributeName="width" from="0" to="100" dur="10s" repeatCount="1" id="progressAnimation"/>
                </rect>

                <!-- æœºé—¨ï¼ˆåœ†å½¢ï¼‰ -->
                <circle cx="300" cy="350" r="180" fill="none" stroke="#9e9e9e" stroke-width="8"/>
                <circle cx="300" cy="350" r="172" fill="rgba(255,255,255,0.1)" stroke="#bdbdbd" stroke-width="2"/>

                <!-- æœºé—¨ç»ç’ƒ -->
                <circle cx="300" cy="350" r="160" fill="rgba(200,230,255,0.3)" stroke="#90a4ae" stroke-width="1"/>

                <!-- æœºé—¨æŠŠæ‰‹ -->
                <rect x="460" y="340" width="20" height="20" rx="3" ry="3" fill="#757575" stroke="#616161" stroke-width="1"/>

                <!-- å†…æ¡¶ -->
                <g id="innerDrum" transform="translate(300, 350)">
                    <!-- æ¡¶å£ -->
                    <circle r="120" fill="none" stroke="#9e9e9e" stroke-width="4"/>
                    <circle r="116" fill="rgba(255,255,255,0.05)"/>

                    <!-- æ¡¶åº• -->
                    <ellipse rx="116" ry="20" fill="#bdbdbd" opacity="0.5"/>

                    <!-- æ…æ‹Œå¶ç‰‡ -->
                    <g id="agitator">
                        <rect x="-15" y="-60" width="30" height="120" rx="5" ry="5" fill="#757575" stroke="#616161" stroke-width="1"/>
                        <rect x="-60" y="-15" width="120" height="30" rx="5" ry="5" fill="#757575" stroke="#616161" stroke-width="1"/>
                        <circle r="10" fill="#616161"/>

                        <!-- æ…æ‹ŒåŠ¨ç”» -->
                        <animateTransform attributeName="transform" type="rotate"
                                        from="0 0 0" to="360 0 0" dur="4s" repeatCount="indefinite" id="agitatorSpin"/>
                    </g>

                    <!-- è¡£ç‰© -->
                    <g id="clothes">
                        <!-- Tæ¤ -->
                        <path d="M -30,-20 Q -30,-30 -20,-35 L 20,-35 Q 30,-30 30,-20 L 25,0 L 25,30 L -25,30 L -25,0 Z"
                              fill="#ff6b6b" stroke="#c92a2a" stroke-width="1" opacity="0.8"/>
                        <!-- è£¤å­ -->
                        <rect x="-15" y="20" width="30" height="40" rx="3" ry="3" fill="#4dabf7" stroke="#1864ab" stroke-width="1" opacity="0.8"/>
                        <!-- è¢œå­ -->
                        <ellipse cx="-40" cy="-10" rx="8" ry="15" fill="#ffd43b" stroke="#fab005" stroke-width="1" opacity="0.8"/>

                        <!-- è¡£ç‰©æ—‹è½¬åŠ¨ç”» -->
                        <animateTransform attributeName="transform" type="rotate"
                                        from="0 0 0" to="-360 0 0" dur="6s" repeatCount="indefinite" id="clothesSpin"/>
                    </g>
                </g>

                <!-- æ°´ -->
                <g id="water" opacity="0">
                    <clipPath id="drumClip">
                        <circle cx="300" cy="350" r="116"/>
                    </clipPath>

                    <g clip-path="url(#drumClip)">
                        <!-- æ°´ä½ -->
                        <rect x="184" y="234" width="232" height="232" fill="url(#waterGradient)" opacity="0.7" id="waterLevel">
                            <animate attributeName="height" from="0" to="232" dur="3s" fill="freeze" id="waterFill"/>
                            <animate attributeName="y" from="466" to="234" dur="3s" fill="freeze"/>
                        </rect>

                        <!-- æ°´æ³¢çº¹ -->
                        <ellipse cx="300" cy="250" rx="80" ry="20" fill="none" stroke="#4FC3F7" stroke-width="2" opacity="0.5">
                            <animate attributeName="rx" from="0" to="100" dur="2s" repeatCount="indefinite"/>
                            <animate attributeName="ry" from="0" to="25" dur="2s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" from="0.8" to="0" dur="2s" repeatCount="indefinite"/>
                        </ellipse>
                        <ellipse cx="300" cy="250" rx="60" ry="15" fill="none" stroke="#81D4FA" stroke-width="1.5" opacity="0.6">
                            <animate attributeName="rx" from="0" to="80" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                            <animate attributeName="ry" from="0" to="20" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                            <animate attributeName="opacity" from="0.8" to="0" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                        </ellipse>
                    </g>
                </g>

                <!-- æ³¡æ²« -->
                <g id="foam" opacity="0">
                    <circle cx="250" cy="240" r="15" fill="url(#foamGradient)" filter="url(#waterDrop)">
                        <animate attributeName="cy" from="240" to="220" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="320" cy="250" r="20" fill="url(#foamGradient)" filter="url(#waterDrop)">
                        <animate attributeName="cy" from="250" to="230" dur="3.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="280" cy="260" r="12" fill="url(#foamGradient)" filter="url(#waterDrop)">
                        <animate attributeName="cy" from="260" to="240" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="340" cy="245" r="18" fill="url(#foamGradient)" filter="url(#waterDrop)">
                        <animate attributeName="cy" from="245" to="225" dur="3.2s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="260" cy="255" r="14" fill="url(#foamGradient)" filter="url(#waterDrop)">
                        <animate attributeName="cy" from="255" to="235" dur="3.8s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- è¿›æ°´ç®¡ -->
                <g id="inletPipe">
                    <rect x="470" y="200" width="50" height="15" rx="7" ry="7" fill="#90a4ae" stroke="#607d8b" stroke-width="2"/>
                    <rect x="485" y="180" width="20" height="20" rx="10" ry="10" fill="#4CAF50" stroke="#388E3C" stroke-width="2"/>

                    <!-- æ°´æµ -->
                    <g id="waterFlow" opacity="0">
                        <rect x="488" y="215" width="14" height="135" fill="#4FC3F7" opacity="0.7">
                            <animate attributeName="opacity" from="0" to="0.8" dur="0.5s" repeatCount="indefinite"/>
                        </rect>

                        <!-- æ°´æ»´ -->
                        <circle r="4" fill="#2196F3" filter="url(#waterDrop)">
                            <animateMotion dur="1s" repeatCount="indefinite">
                                <mpath href="#waterPath"/>
                            </animateMotion>
                            <animate attributeName="opacity" from="1" to="0" dur="1s" repeatCount="indefinite"/>
                        </circle>
                        <circle r="3" fill="#03A9F4" filter="url(#waterDrop)">
                            <animateMotion dur="1.2s" begin="0.3s" repeatCount="indefinite">
                                <mpath href="#waterPath"/>
                            </animateMotion>
                            <animate attributeName="opacity" from="1" to="0" dur="1.2s" begin="0.3s" repeatCount="indefinite"/>
                        </circle>
                    </g>

                    <!-- æ°´æµè·¯å¾„ -->
                    <path id="waterPath" d="M 495 215 L 495 350" fill="none"/>
                </g>

                <!-- æ’æ°´ç®¡ -->
                <g id="drainPipe">
                    <rect x="80" y="600" width="50" height="15" rx="7" ry="7" fill="#90a4ae" stroke="#607d8b" stroke-width="2"/>
                    <rect x="70" y="590" width="70" height="20" rx="10" ry="10" fill="#f44336" stroke="#d32f2f" stroke-width="2"/>

                    <!-- æ’æ°´æµ -->
                    <g id="drainFlow" opacity="0">
                        <rect x="93" y="615" width="24" height="50" fill="#2196F3" opacity="0.6">
                            <animate attributeName="opacity" from="0" to="0.8" dur="0.5s" repeatCount="indefinite"/>
                        </rect>
                    </g>
                </g>

                <!-- åº•åº§ -->
                <rect x="50" y="620" width="500" height="30" rx="5" ry="5" fill="#757575" stroke="#616161" stroke-width="2"/>

                <!-- è°ƒèŠ‚è„š -->
                <rect x="70" y="645" width="15" height="5" fill="#424242"/>
                <rect x="515" y="645" width="15" height="5" fill="#424242"/>

                <!-- çŠ¶æ€æŒ‡ç¤ºç¯ -->
                <g id="statusLights">
                    <circle cx="400" cy="95" r="5" fill="#4CAF50" opacity="0.3" id="inletLight">
                        <animate attributeName="opacity" from="0.3" to="1" dur="1s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="430" cy="95" r="5" fill="#2196F3" opacity="0.3" id="washLight">
                        <animate attributeName="opacity" from="0.3" to="1" dur="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="460" cy="95" r="5" fill="#FF9800" opacity="0.3" id="drainLight">
                        <animate attributeName="opacity" from="0.3" to="1" dur="2s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- æ ‡ç­¾ -->
                <text x="300" y="40" text-anchor="middle" font-size="24" font-weight="bold" fill="#333">æ´—è¡£æœºå·¥ä½œåŸç†</text>

                <!-- é˜¶æ®µæ ‡ç­¾ -->
                <text x="300" y="30" text-anchor="middle" font-size="16" fill="#666" id="stageLabel">å‡†å¤‡å°±ç»ª</text>
            </svg>
        </div>

        <div class="controls-panel">
            <h3>ğŸ® æ§åˆ¶é¢æ¿</h3>

            <div class="stage-buttons">
                <button class="stage-btn" onclick="startStage('inlet')">ğŸ’§ è¿›æ°´</button>
                <button class="stage-btn" onclick="startStage('wash')">ğŸ§¼ æ´—æ¶¤</button>
                <button class="stage-btn" onclick="startStage('drain')">ğŸŒŠ æ’æ°´</button>
                <button class="stage-btn" onclick="startStage('spin')">ğŸŒ€ è„±æ°´</button>
                <button class="stage-btn auto-btn" onclick="startAutoMode()">ğŸ”„ å…¨è‡ªåŠ¨æ¨¡å¼</button>
            </div>

            <div class="status-panel">
                <h4>ğŸ“Š è¿è¡ŒçŠ¶æ€</h4>
                <div class="status-item">
                    <span class="status-label">å½“å‰é˜¶æ®µ:</span>
                    <span class="status-value" id="currentStage">å¾…æœº</span>
                </div>
                <div class="status-item">
                    <span class="status-label">æ°´ä½:</span>
                    <span class="status-value" id="waterLevel">ç©º</span>
                </div>
                <div class="status-item">
                    <span class="status-label">è¿è¡ŒçŠ¶æ€:</span>
                    <span class="status-value" id="runStatus">åœæ­¢</span>
                </div>
                <div class="status-item">
                    <span class="status-label">è¿›åº¦:</span>
                    <span class="status-value" id="progress">0%</span>
                </div>
            </div>

            <div class="info-panel">
                <h4>â„¹ï¸ å½“å‰é˜¶æ®µè¯´æ˜</h4>
                <p id="stageInfo">ç‚¹å‡»æ§åˆ¶æŒ‰é’®å¼€å§‹æ´—è¡£æµç¨‹ï¼Œæˆ–é€‰æ‹©å…¨è‡ªåŠ¨æ¨¡å¼è§‚çœ‹å®Œæ•´æµç¨‹ã€‚</p>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4FC3F7;"></div>
                        <span>æ°´æµ</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ffffff;"></div>
                        <span>æ³¡æ²«</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff6b6b;"></div>
                        <span>è¡£ç‰©</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4CAF50;"></div>
                        <span>è¿›æ°´</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStage = null;
        let autoMode = false;
        let stageTimeout = null;

        // é˜¶æ®µä¿¡æ¯
        const stageInfo = {
            inlet: {
                label: 'è¿›æ°´é˜¶æ®µ',
                waterLevel: 'æ³¨æ°´ä¸­',
                status: 'è¿›æ°´ä¸­',
                info: 'æ´—è¡£æœºå¼€å§‹æ³¨æ°´ï¼Œæ°´ä½é€æ¸ä¸Šå‡åˆ°è®¾å®šçš„æ°´ä½ã€‚é˜€é—¨æ‰“å¼€ï¼Œæ°´é€šè¿‡è¿›æ°´ç®¡è¿›å…¥å†…æ¡¶ã€‚',
                progress: '25%'
            },
            wash: {
                label: 'æ´—æ¶¤é˜¶æ®µ',
                waterLevel: 'é«˜æ°´ä½',
                status: 'æ´—æ¶¤ä¸­',
                info: 'å†…æ¡¶å’Œæ…æ‹Œå™¨å¼€å§‹æ—‹è½¬ï¼Œäº§ç”Ÿæ°´æµå’Œæ³¡æ²«ï¼Œå¯¹è¡£ç‰©è¿›è¡Œæ¸…æ´ã€‚æ´—æ¶¤å‰‚å……åˆ†å‘æŒ¥ä½œç”¨ã€‚',
                progress: '50%'
            },
            drain: {
                label: 'æ’æ°´é˜¶æ®µ',
                waterLevel: 'æ’æ°´ä¸­',
                status: 'æ’æ°´ä¸­',
                info: 'æ’æ°´æ³µå¯åŠ¨ï¼Œå°†æ´—æ¶¤åçš„æ±¡æ°´é€šè¿‡æ’æ°´ç®¡æ’å‡ºã€‚æ°´ä½é€æ¸ä¸‹é™ã€‚',
                progress: '75%'
            },
            spin: {
                label: 'è„±æ°´é˜¶æ®µ',
                waterLevel: 'ç©º',
                status: 'è„±æ°´ä¸­',
                info: 'å†…æ¡¶é«˜é€Ÿæ—‹è½¬ï¼Œåˆ©ç”¨ç¦»å¿ƒåŠ›å°†è¡£ç‰©ä¸­çš„æ°´åˆ†ç”©å¹²ã€‚è½¬é€Ÿè¾¾åˆ°æœ€é«˜æ—¶äº§ç”Ÿå¼ºåŠ²è„±æ°´æ•ˆæœã€‚',
                progress: '100%'
            }
        };

        // è·å–SVGå…ƒç´ 
        const svg = document.querySelector('svg');
        const water = document.getElementById('water');
        const foam = document.getElementById('foam');
        const waterFlow = document.getElementById('waterFlow');
        const drainFlow = document.getElementById('drainFlow');
        const agitatorSpin = document.getElementById('agitatorSpin');
        const clothesSpin = document.getElementById('clothesSpin');
        const waterFill = document.getElementById('waterFill');
        const display = document.getElementById('display');
        const stageLabel = document.getElementById('stageLabel');
        const progressBar = document.getElementById('progressBar');

        // å¼€å§‹å•ä¸ªé˜¶æ®µ
        function startStage(stage) {
            clearStage();
            currentStage = stage;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            updateButtons(stage);

            // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
            updateStatus(stage);

            // å¼€å§‹å¯¹åº”åŠ¨ç”»
            switch(stage) {
                case 'inlet':
                    startInletAnimation();
                    break;
                case 'wash':
                    startWashAnimation();
                    break;
                case 'drain':
                    startDrainAnimation();
                    break;
                case 'spin':
                    startSpinAnimation();
                    break;
            }
        }

        // æ¸…é™¤å½“å‰é˜¶æ®µ
        function clearStage() {
            if (stageTimeout) {
                clearTimeout(stageTimeout);
            }

            // é‡ç½®æ‰€æœ‰å…ƒç´ 
            water.setAttribute('opacity', '0');
            foam.setAttribute('opacity', '0');
            waterFlow.setAttribute('opacity', '0');
            drainFlow.setAttribute('opacity', '0');
            agitatorSpin.setAttribute('dur', '4s');
            clothesSpin.setAttribute('dur', '6s');

            // é‡ç½®æ°´ä½
            const waterLevel = document.getElementById('waterLevel');
            if (waterLevel) {
                waterLevel.setAttribute('height', '0');
                waterLevel.setAttribute('y', '466');
            }
        }

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        function updateButtons(activeStage) {
            const buttons = document.querySelectorAll('.stage-btn');
            buttons.forEach(btn => btn.classList.remove('active'));

            const stageMap = {
                'inlet': 0,
                'wash': 1,
                'drain': 2,
                'spin': 3
            };

            if (stageMap[activeStage] !== undefined) {
                buttons[stageMap[activeStage]].classList.add('active');
            }
        }

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(stage) {
            const info = stageInfo[stage];
            document.getElementById('currentStage').textContent = info.label;
            document.getElementById('waterLevel').textContent = info.waterLevel;
            document.getElementById('runStatus').textContent = info.status;
            document.getElementById('runStatus').classList.add('active');
            document.getElementById('progress').textContent = info.progress;
            document.getElementById('stageInfo').textContent = info.info;

            display.textContent = info.label;
            stageLabel.textContent = info.label + 'è¿è¡Œä¸­...';
        }

        // è¿›æ°´åŠ¨ç”»
        function startInletAnimation() {
            // æ˜¾ç¤ºæ°´å’Œæ°´æµ
            water.setAttribute('opacity', '1');
            waterFlow.setAttribute('opacity', '1');

            // å¯åŠ¨æ°´ä½ä¸Šå‡åŠ¨ç”»
            waterFill.beginElement();

            // ç‚¹äº®è¿›æ°´ç¯
            document.getElementById('inletLight').style.opacity = '1';

            // è¿›æ°´æ—¶é—´ï¼ˆ3ç§’ï¼‰
            stageTimeout = setTimeout(() => {
                if (!autoMode) {
                    showMessage('è¿›æ°´å®Œæˆ');
                    document.getElementById('runStatus').classList.remove('active');
                }
            }, 3000);
        }

        // æ´—æ¶¤åŠ¨ç”»
        function startWashAnimation() {
            // æ˜¾ç¤ºæ°´å’Œæ³¡æ²«
            water.setAttribute('opacity', '1');
            foam.setAttribute('opacity', '1');

            // è®¾ç½®å¿«é€Ÿæ—‹è½¬
            agitatorSpin.setAttribute('dur', '2s');
            clothesSpin.setAttribute('dur', '3s');

            // ç‚¹äº®æ´—æ¶¤ç¯
            document.getElementById('washLight').style.opacity = '1';

            // æ´—æ¶¤æ—¶é—´ï¼ˆ5ç§’ï¼‰
            stageTimeout = setTimeout(() => {
                if (!autoMode) {
                    showMessage('æ´—æ¶¤å®Œæˆ');
                    document.getElementById('runStatus').classList.remove('active');
                }
            }, 5000);
        }

        // æ’æ°´åŠ¨ç”»
        function startDrainAnimation() {
            // æ˜¾ç¤ºæ’æ°´æµ
            drainFlow.setAttribute('opacity', '1');

            // æ°´ä½ä¸‹é™åŠ¨ç”»
            const waterLevel = document.getElementById('waterLevel');
            if (waterLevel) {
                waterLevel.style.transition = 'all 3s ease-out';
                waterLevel.setAttribute('height', '0');
                waterLevel.setAttribute('y', '466');
            }

            // ç‚¹äº®æ’æ°´ç¯
            document.getElementById('drainLight').style.opacity = '1';

            // æ’æ°´æ—¶é—´ï¼ˆ3ç§’ï¼‰
            stageTimeout = setTimeout(() => {
                water.setAttribute('opacity', '0');
                foam.setAttribute('opacity', '0');
                drainFlow.setAttribute('opacity', '0');

                if (!autoMode) {
                    showMessage('æ’æ°´å®Œæˆ');
                    document.getElementById('runStatus').classList.remove('active');
                }
            }, 3000);
        }

        // è„±æ°´åŠ¨ç”»
        function startSpinAnimation() {
            // è¶…é«˜é€Ÿæ—‹è½¬
            agitatorSpin.setAttribute('dur', '0.5s');
            clothesSpin.setAttribute('dur', '0.8s');

            // è„±æ°´æ•ˆæœ
            const clothes = document.getElementById('clothes');
            clothes.style.transformOrigin = 'center';

            // è„±æ°´æ—¶é—´ï¼ˆ4ç§’ï¼‰
            stageTimeout = setTimeout(() => {
                // æ¢å¤æ­£å¸¸é€Ÿåº¦
                agitatorSpin.setAttribute('dur', '4s');
                clothesSpin.setAttribute('dur', '6s');

                if (!autoMode) {
                    showMessage('è„±æ°´å®Œæˆ - æ´—è¡£ç»“æŸï¼');
                    document.getElementById('runStatus').classList.remove('active');
                    display.textContent = 'æ´—è¡£å®Œæˆ';
                    stageLabel.textContent = 'æ´—è¡£å®Œæˆ';
                }
            }, 4000);
        }

        // å…¨è‡ªåŠ¨æ¨¡å¼
        function startAutoMode() {
            autoMode = true;
            clearStage();

            showMessage('å¼€å§‹å…¨è‡ªåŠ¨æ´—è¡£æ¨¡å¼');

            // è¿›æ°´é˜¶æ®µ
            setTimeout(() => startStage('inlet'), 1000);

            // æ´—æ¶¤é˜¶æ®µ
            setTimeout(() => startStage('wash'), 4000);

            // æ’æ°´é˜¶æ®µ
            setTimeout(() => startStage('drain'), 9000);

            // è„±æ°´é˜¶æ®µ
            setTimeout(() => startStage('spin'), 12000);

            // å®Œæˆ
            setTimeout(() => {
                autoMode = false;
                showMessage('å…¨è‡ªåŠ¨æ´—è¡£å®Œæˆï¼');
                display.textContent = 'å®Œæˆ';
                stageLabel.textContent = 'æ´—è¡£å®Œæˆ';
                document.querySelectorAll('.stage-btn').forEach(btn => btn.classList.remove('active'));
            }, 16000);
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #4CAF50;
                color: white;
                padding: 15px 30px;
                border-radius: 25px;
                font-weight: bold;
                z-index: 1000;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                animation: slideDown 0.5s ease-out;
            `;
            messageDiv.textContent = message;

            document.body.appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.style.animation = 'slideUp 0.5s ease-in';
                setTimeout(() => messageDiv.remove(), 500);
            }, 2000);
        }

        // æ·»åŠ åŠ¨ç”»æ ·å¼
        const animStyle = document.createElement('style');
        animStyle.textContent = `
            @keyframes slideDown {
                from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                to { transform: translateX(-50%) translateY(0); opacity: 1; }
            }
            @keyframes slideUp {
                from { transform: translateX(-50%) translateY(0); opacity: 1; }
                to { transform: translateX(-50%) translateY(-100%); opacity: 0; }
            }
        `;
        document.head.appendChild(animStyle);

        // é”®ç›˜æ§åˆ¶
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case '1':
                    startStage('inlet');
                    break;
                case '2':
                    startStage('wash');
                    break;
                case '3':
                    startStage('drain');
                    break;
                case '4':
                    startStage('spin');
                    break;
                case 'a':
                case 'A':
                    startAutoMode();
                    break;
                case 'Escape':
                    clearStage();
                    document.getElementById('runStatus').classList.remove('active');
                    document.querySelectorAll('.stage-btn').forEach(btn => btn.classList.remove('active'));
                    break;
            }
        });

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            showMessage('æ¬¢è¿ä½¿ç”¨æ´—è¡£æœºå·¥ä½œåŸç†æ¼”ç¤º');

            // æ·»åŠ è¿›åº¦æ¡é‡ç½®
            progressBar.addEventListener('animationend', () => {
                progressBar.style.width = '0';
                progressBar.style.animation = 'none';
                setTimeout(() => {
                    progressBar.style.animation = 'progressAnimation 10s';
                }, 100);
            });
        });

        // æ§åˆ¶å°ä¿¡æ¯
        console.log('ğŸŒ€ æ´—è¡£æœºå·¥ä½œåŸç†æ¼”ç¤ºå·²åŠ è½½');
        console.log('ğŸ® é”®ç›˜å¿«æ·é”®:');
        console.log('  - 1: è¿›æ°´é˜¶æ®µ');
        console.log('  - 2: æ´—æ¶¤é˜¶æ®µ');
        console.log('  - 3: æ’æ°´é˜¶æ®µ');
        console.log('  - 4: è„±æ°´é˜¶æ®µ');
        console.log('  - A: å…¨è‡ªåŠ¨æ¨¡å¼');
        console.log('  - ESC: åœæ­¢');
    </script>
</body>
</html>